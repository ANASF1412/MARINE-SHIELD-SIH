{% extends "base.html" %}

{% block title %}Detection Results - {{ super() }}{% endblock %}

{% block content %}
<div class="result-container">
    <h2>Segmentation Results</h2>

    <div class="image-display-section">
        <h3>Overlay</h3>
        <div class="result-image-container">
            <img src="{{ results.overlay_path }}" alt="Segmentation overlay">
        </div>
    </div>

    <div class="summary-section">
        <h3>Spill Properties Summary</h3>
        {% if results.detection_summary.spill_detected %}
        <table class="summary-table">
            <tr>
                <th>Property</th>
                <th>Value</th>
            </tr>
            <tr>
                <td>Area (pixels)</td>
                <td>{{ results.detection_summary.total_spill_area | round(2) }}</td>
            </tr>
            <tr>
                <td>Coverage</td>
                <td>{{ results.detection_summary.coverage_percent | round(2) }}%</td>
            </tr>
            <tr>
                <td>Shape</td>
                <td>{{ results.detection_summary.shape }}</td>
            </tr>
            <tr>
                <td>Confidence</td>
                <td>{{ (results.detection_summary.confidence * 100) | round(2) }}%</td>
            </tr>
        </table>
        {% else %}
        <p>No oil spill was detected in the provided image.</p>
        {% endif %}
    </div>

    <div class="action-buttons">
        <a href="{{ url_for('generate_report', filename=results.image_name) }}" class="button download-button">Download Report</a>
        <a href="{{ url_for('index') }}" class="button back-button">Back to Upload</a>
    </div>
</div>
{% endblock %}